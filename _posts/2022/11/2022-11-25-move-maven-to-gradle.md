---
layout: post
title:  Maven 转换成 Gradle
tagline: by feng
categories: java
tags: 
    - feng
---

大家好，我是指北君。

今天我们来讲讲如何将 Maven 项目转换为 Gradle 项目。 这个过程还是蛮简单的，下面通过一个例子来说明怎么转换。

<!--more-->

### Gradle 设置

如果没有安装 gradle， 我们可以从 Gradle 官网下载最新的版本，根据gradle官方的文档安装即可。 可以看我们之前的文章，这里不过多的描述。

### Maven pom

假设我们有这样一个 maven项目，pom.xml 文件如下：

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>cn.javanorth</groupId>
    <artifactId>maven-to-gradle</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <dependencies>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
            <version>3.12.0</version>
        </dependency>
    </dependencies>
</project>
```

有了maven项目，也安装了gradle，那我们就可以动手转换到gradle了。

### 执行 gadle init

我们在终端跳转到Maven项目的根目录，就是包含pom.xml 文件的目录， 然后执行 `gradle init` 命令。从终端响应结果从输入`yes` 并按回车健。

```Shell
$ gradle init

Found a Maven build. Generate a Gradle build from this? (default: yes) [yes, no] yes


> Task :init
Maven to Gradle conversion is an incubating feature.
Get more help with your project: https://docs.gradle.org/7.3/userguide/migrating_from_maven.html

BUILD SUCCESSFUL in 3s
2 actionable tasks: 2 executed
```

### 生成的Gradle构建文件

现在让我们重新检查一下我们项目的根目录的内容。我们应该在根目录中看到一些新文件，下面我们展开讲讲这几个文件的用处。

#### *build.gradle*

`build.gradle` 文件是Gradle构建过程的核心组件，它直接等同于Maven构建的`pom.xml`文件。我们可以看到`pom.xml`中的依赖属性，如`groupId、version、dependencies`，会有一些对应的gradle属性与之关联。

另外还有`sourceCompatibility`属性，它是用于告诉我们在编译Java时要使用哪个Java版本。

插件部分， [java](https://docs.gradle.org/current/userguide/java_plugin.html#java_plugin)是为构建任何类型的Java项目提供支持，而 maven-publish 是为发布项目到Maven兼容的仓库提供支持。

```groovy
/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'maven-publish'
}

repositories {
    mavenLocal()
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}

dependencies {
    implementation 'org.apache.commons:commons-lang3:3.12.0'
}

group = 'cn.javanorth'
version = '0.0.1-SNAPSHOT'
description = 'maven-to-gradle'
java.sourceCompatibility = JavaVersion.VERSION_1_8

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
        }
    }
}
```

#### settings.gradle

Gradle在初始化过程中是通过使用*settings.gradle*文件来配置并确定哪些项目被包含在此次构建中。

```gradle
/*
 * This file was generated by the Gradle 'init' task.
 */

rootProject.name = 'maven-to-gradle'
```

#### gradlew 和 gradlew.bat

Gradle还生成了两个启动脚本，gradlew.bat 用于Windows，而gradlew用于Unix和Linux的环境，这些脚本也可以在没有设置Gradle的机器上运行项目，它会自动下载gradle wrapper来运行。
