---
layout: post
title:  Oracle 对象
tagline: by 揽月中人
categories: Oracle
tags:
- 揽月中人
---
数据库的功能就是组织管理和存储各种数据库对象。数据库中的对象是我们进行数据管理的基本。本篇会回顾一下数据库对象的一些基本知识，让我们更加清晰的了解这些Oracle数据库对象。
<!--more-->

### 1.  表（Table）

我们操作数据库的时候，大部分都是操作表来完成的。表是一个逻辑概念，是数据库组织管理数据的基本单位。

表可以分为关系表和对象表。 关系表包含堆表、索引组织表、外部表。我们常用的为堆表。

堆表对应的段是以堆的结构形式存储的，存储的数据逻辑上市无序的。

表与段（Segment）对应的关系如下

- 对于非分区表，一个表对应一个段；

- 对于分区表，一个分区对应一个段；

- 对于有子分区的表，一个子分区对应一个段；

  其他的数据库对象与此类似

#### 1.1 表分区

表分区（Partition），就是根据用户的数据情况和业务需求，将表中的数据由一个段中变为多个段存储，以方便对用户数据的管理和维护，提升查询操作的性能。当然也有一些缺点，使用不当的话会出现一些性能问题；应用分区表需要有更多的经验，更全面的考量，这也对开发者提出了更高的要求。

何时应用分区：

- 首先需要考虑的是数据量，足够大的数据量才有分区的必要，少量数据根本没必要进行分区。Oracle官方推荐，表所占的存储空间超过2GB时，可以考虑对表进行分区。一般来说尽量避免分区，需要分区一定要有充分的理由。
- 如果当前非分区的表已经影响到了用户对数据的管理和维护，可以考虑分区。
- 分区之后是否能提高用户的查询及操作性能。

关于如何分区，我们后面的文章在继续分析。



### 2. 索引（Index）

索引是建立在表上的逻辑对象。索引可以提高表数据的访问查询效率，对性能优化有着非常大的作用。索引也是和一个或者多个段相关联，索引最终存储的位置也是段。不同类型的索引有不同的存储逻辑结构，如B树，Bitmap（位图）等。

索引是表的可选项，创建适当的索引是数据库优化的重中之重。然而索引可以提高查询效率，同时也会降低DML操作的效率，两者综合考虑后才会有比较好的性能。

关于索引的数据库优化方案，大多是避免索引失效，优化索引使用顺序等。B*树索引，位图索引等索引会在后面的文章中具体去说一下。

### 3. 簇（Cluster）

簇是一个包含一个或多个表数据的数据库对象，其中被包含的表中都会具有共同的一列或者多列，这些列称为簇键列。

创建簇需要相应的权限，开发中使用不多。簇可以分为索引簇和哈希簇，区别就是查找数据的时候前者通过簇键列上的索引，后者使用簇键列的哈希值。根据使用场景来确定来使用那种类型。

### 4.视图（View） & 物化视图（Materialized View）

视图是一种虚定义的逻辑对象，主要用来简化业务逻辑、方便开发维护，视图并不包含任何数据，其数据基于视图对应的其他对象。

视图可以提供一些增删改查的操作，同时有一定的安全性，可以屏蔽一些列，使用起来也比较灵活。但对于性能会有一些影响。

物化视图，相对于视图而言，物化视图可以实际存储数据，和表一样对应相关的段。

物化视图可以用来汇总，计算等业务。同时也可以在一定条件下进行增删改查，并且也可以建立索引等。

### 5. 同义词（Synonym）

同义词也是虚的一个逻辑对象，不会存储任何数据。本质上算是其他数据对象的一个别名。同时可以将同义词的权限分配给不同的用户，作为安全管理的一种方式。

### 6. 序列（Sequence）

序列不存储任何数据，用户可以通过序列获取一系列有序的数值。

定义序列的时候可以定义序列名，升降序，步长等。如果负载并发很高的情况下，序列的增长会影响整体的性能。

### 7. 过程（Procedure） & 函数(Function)

过程和函数都是虚逻辑对象，不存储数据。主要功能就是使用数据库编码的调用来执行一系列任务。

过程和函数都是数据库中的对象，有一组SQL或者一些其他的PL语句组成。为解决特定问题而编写的一单元。

不同的是函数有一个返回值，除此之位，过程和函数在其他方面均相同。

### 8.触发器（Trigger）

触发器也是数据库的一个逻辑对象，不存储数据。主要是通过数据库编码，在事件自动触发的时候执行一组命令。

其执行过程是自动的，当某一个事件触发相关条件后，则会执行。

### 9. 约束（Constraint）

约束是数据库中的逻辑对象，其功能是通过一些内部或者自动逸逻辑来实现对数据的检查和限制，使其符合某种规则或者标准。从而实现数据的规则化，标准化。

常见的约束有

- 主键约束
- 唯一约束
- 非空约束
- 外键约束
- 自定义约束（检查约束）

### 总结

Oracle的基本对象在开发中使用比较频繁，我们经常会使用到这些对象。每一种对象其背后都有复杂的工作原理以及使用技巧，这里先简单介绍这些常用对象，后面再结合实际应用来说了其在开发优化中的应用。